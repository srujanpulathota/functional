traces
| where timestamp > ago(24h)
| where message has "[REPLICATED]"
| extend SecretName = extract(@"REPLICATED] ([^:]+):", 1, message)
| extend NewVersion = extract(@"newVersion=([0-9a-fA-F-]+)", 1, message)
| summarize ReplicatedCount = count() by SecretName, NewVersion
| where ReplicatedCount > 1
| order by ReplicatedCount desc

traces
| where timestamp > ago(2h)
| where message has "[REPLICATED]" or message has "[LOOP-TAG]"
| extend SecretName = extract(@"REPLICATED] ([^:]+):", 1, message)
| extend NewVersion = extract(@"newVersion=([0-9a-fA-F-]+)", 1, message)
| extend IsReplicated = message has "[REPLICATED]"
| extend IsLoopSkip  = message has "[LOOP-TAG]"
| summarize 
    ReplicatedCount = countif(IsReplicated),
    LoopSkipCount   = countif(IsLoopSkip)
  by SecretName, NewVersion
| order by timestamp desc


